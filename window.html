<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Parse XML with DMS Coordinates</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #fafafa; display: flex; flex-direction: column; min-height: 100vh; }
    textarea { width: 100%; height: 300px; margin-bottom: 10px; font-family: monospace; }
    button { padding: 10px 20px; margin-right: 10px; cursor: pointer; }
    #result { background: #f9f9f9; padding: 15px; border: 1px solid #ccc; margin-top: 20px; white-space: pre-wrap; font-family: monospace; flex-grow: 1; }
    footer { text-align: center; color: #666; font-style: italic; margin-top: 30px; padding-top: 10px; border-top: 1px solid #ddd; }
    .bullet { font-weight: bold; margin-right: 6px; }
    .area { color: #e6b800; }       /* Yellow */
    .line { color: #007bff; }       /* Blue */
    .circle { color: #28a745; }     /* Green */
    .coast { color: #8b4513; }      /* Brown */
    .label { color: #9b59b6; }      /* Purple */
    .userchart { color: #ff6600; font-weight: bold; } /* Orange for UserChart label */
  </style>
</head>
<body>

<h2>XML Coordinate Parser (Areas, Lines, Circles, Coast Lines, Labels, UserChart)</h2>

<textarea id="xmlInput" placeholder="Paste your XML here..."></textarea>
<br>
<button onclick="parseXML()">Parse XML</button>
<button onclick="downloadTextFile()">Download .txt</button>

<div id="result"></div>

<footer id="footerText"></footer>

<script>
  let parsedOutput = '';

  // --- Random motivational footer ---
  const quotes = [
    "Keep pushing forward — progress is progress, no matter how small.",
    "You’re capable of more than you think.",
    "Every great achievement starts with one simple step.",
    "Stay curious. Keep learning. Keep growing.",
    "Success is built on consistency, not perfection.",
    "Small daily improvements lead to stunning results.",
    "Your effort today shapes your tomorrow.",
    "Believe you can — and you’re already halfway there.",
    "Persistence turns goals into achievements.",
    "Every challenge is a chance to get stronger."
    "Don’t wait for opportunity. Create it."
    "Discipline beats motivation every damn day."
    "Start where you are. Use what you have. Do what you can."
    "The harder you work, the luckier you get."
    "Push yourself, because no one else is going to do it for you."
    "Dream big. Start small. Act now."
    "You didn’t come this far to only come this far."
    "Done is better than perfect."
    "If it’s easy, you’re probably not growing."
    "Make it happen. Shock everyone."
    "Be stronger than your excuses."
    "One day or day one — you decide."
    "Success is the sum of small efforts repeated daily."
    "Fall seven times, stand up eight."
    "You miss 100% of the shots you don’t take."
    "Wake up with determination, go to bed with satisfaction."
    "Stop doubting yourself. Work harder and prove it."
    "Pain is temporary. Quitting lasts forever."
    "Excuses don’t burn calories."
    "If you get tired, learn to rest, not to quit."
    "Courage is not having the strength to go on; it’s going on when you don’t have the strength."
    "Work hard in silence, let your success make the noise."
    "Stay hungry. Stay foolish."
    "You don’t need to be perfect, just consistent."
    "A little progress each day adds up to big results."
    "Don’t wish for it, work for it."
    "Stop waiting for motivation. Start with action."
    "The best view comes after the hardest climb."
    "You are stronger than you think."
    "Don’t limit your challenges — challenge your limits."
    "Success is never owned, it’s rented — and rent is due every day."
    "Grind now. Shine later."
    "Your only limit is your mind."
    "Make today count. You’ll never get it back."
    "You can’t have a million-dollar dream with a minimum-wage work ethic."
    "The comeback is always stronger than the setback."
    "Hustle beats talent when talent doesn’t hustle."
    "Don’t stop until you’re proud."
    "Success doesn’t come from what you do occasionally, it comes from what you do consistently."
    "Your future self is watching you. Don’t let them down."
    "Keep going. Everything you need will come to you at the perfect time."
    "Small steps every day."
    "Prove them wrong."
    "You can’t deposit excuses in the bank."
    "Be so good they can’t ignore you."
    "Nobody cares, work harder."
    "Turn the pain into power."
    "You are your only competition."
    "A year from now, you’ll wish you had started today."
    "It always seems impossible until it’s done."
    "Focus on progress, not perfection."
    "Don’t be afraid to be a beginner."
    "You’ve got this — even if you don’t believe it yet."
    "If you can’t stop thinking about it, don’t stop working for it."
    "You don’t find willpower, you create it."
    "Every day is a second chance."
    "Winners are just losers who tried one more time."
    "Work until your idols become your rivals."
    "You owe it to yourself to become everything you’ve ever dreamed of."
    "No rain, no flowers."
    "Your dream doesn’t have an expiration date."
    "A goal without a plan is just a wish."
    "The secret of getting ahead is getting started."
    "You’re allowed to be both a masterpiece and a work in progress."
    "If not now, when?"
    "Focus on being productive, not busy."
    "Don’t be pushed by your problems; be led by your dreams."
    "Stop waiting for the perfect moment. Take the moment and make it perfect."
    "There’s no traffic on the extra mile."
    "Work hard. Stay humble."
    "Success doesn’t happen overnight — it happens one day at a time."
    "Sweat, smile, repeat."
    "Consistency creates confidence."
    "If you’re not willing to risk the usual, you’ll have to settle for the ordinary."
    "Fear kills more dreams than failure ever will."
    "One step at a time is still progress."
    "Don’t count the days; make the days count."
    "Winners train, losers complain."
    "Failure is just feedback."
    "Keep moving forward — even if it’s just a shuffle."
    "Procrastination is the enemy of progress."
    "Rise up. Hustle. Repeat."
    "Mindset is everything."
    "Hard work beats luck when luck doesn’t show up."
    "Be the energy you want to attract."
    "No pressure, no diamonds."
    "Your dreams don’t work unless you do."
    "Never let success get to your head or failure get to your heart."
    "Work until you no longer have to introduce yourself."
    "Stop being afraid of what could go wrong and think of what could go right."
    "You’re capable of more than you know."
    "Winners focus on winning; losers focus on winners."
    "Doubt kills more dreams than failure ever will."
    "Action is the foundational key to all success."
    "When you feel like quitting, remember why you started."
    "You don’t need to see the whole staircase, just take the first step."
    "Progress is progress, no matter how small."
    "Keep showing up — that’s half the battle."
    "Your habits define your future."
    "Believe in yourself like your life depends on it — because it does."
    "A smooth sea never made a skilled sailor."
    "Set your course by the stars, not by the lights of every passing ship."
    "You can’t control the wind, but you can adjust your sails."
    "The cure for anything is salt water: sweat, tears, or the sea."
    "Calm seas never taught a sailor how to fight the storm."
    "A true sailor finds peace in the chaos of the waves."
    "Storms make sailors — not sunshine."
    "Keep your compass steady, even when the sea gets rough."
    "Every wave is a challenge, but also a chance to rise."
    "Sail with purpose, not just direction — the ocean rewards the brave."
    "The sea doesn’t take orders, it teaches lessons."
    "Even in the darkest storm, the horizon waits for you."
    "Real sailors don’t fear storms — they learn from them."
    "The ocean doesn’t test your strength; it reveals it."
    "A sailor’s heart beats with the tide."
    "Bravery isn’t found on calm waters."
    "Every sailor carries the ocean in his soul."
    "When you lose sight of land, that’s when you start to find yourself."
    "The ocean doesn’t break men, it makes them honest."
    "Sail far, dream wide, and let the wind remind you you’re alive."
    "Waves are whispers from the sea telling you to keep going."
    "The storm will pass, but your courage stays."
    "True sailors know: adventure begins where comfort ends."
    "There’s freedom in the wind for those who dare to chase it."
    "Let the sea set you free."
    "Even the calmest sailor has weathered wild storms."
    "Your anchor is your mindset — drop it wisely."
    "Every horizon hides a new chance."
    "Sail steady — destiny favors the bold."
    "Not all who wander are lost, but all sailors find peace at sea."
    "The wind doesn’t ask for permission — it rewards courage."
    "A real husband doesn’t just provide — he partners."
    "Love is a verb, not a feeling. Show it daily."
    "Strong husbands build strong homes."
    "The best gift a man can give his wife is consistency."
    "Lead with love, not ego."
    "You’re not just her husband — you’re her safe place."
    "Behind every great wife is a husband smart enough to listen."
    "Marriage isn’t 50/50 — it’s 100/100, every day."
    "Be the man you promised you’d be on your wedding day."
    "Real men apologize first. Pride doesn’t keep a marriage afloat."
    "Husbands: your words can build a kingdom or burn a bridge — choose wisely."
    "Every time you show patience, you invest in peace."
    "Be her calm in the chaos."
    "A husband’s love should feel like a lighthouse — steady, reliable, and bright."
    "Grow old with her, but never grow boring with her."
    "A strong husband knows love is in the details — even the tiny ones."
    "Your wife doesn’t need perfection. She needs presence."
    "Marriage is two imperfect people refusing to give up on each other."
    "Happiness in marriage doesn’t come from getting everything right — it comes from never stopping trying."
    "Happy wife, happy life."
  ];
  document.getElementById("footerText").textContent = quotes[Math.floor(Math.random() * quotes.length)];

  // --- Coordinate conversion ---
  function toDM(deg, isLat) {
    const absolute = Math.abs(deg);
    const degrees = Math.floor(absolute);
    const minutes = (absolute - degrees) * 60;
    const direction = deg >= 0 ? (isLat ? "N" : "E") : (isLat ? "S" : "W");
    const degStr = degrees < 10 ? "0" + degrees : degrees.toString();
    const minStr = minutes < 10 ? "0" + minutes.toFixed(3) : minutes.toFixed(3);
    return `${degStr}°${minStr}′ ${direction}`;
  }

  function parseXML() {
    const xmlString = document.getElementById('xmlInput').value;
    if (!xmlString.trim()) {
      document.getElementById('result').textContent = 'Please paste XML data first.';
      return;
    }

    try {
      const parser = new DOMParser();
      const xmlDoc = parser.parseFromString(xmlString, "application/xml");
      if (xmlDoc.getElementsByTagName("parsererror").length > 0) {
        document.getElementById('result').textContent = 'Error parsing XML. Please check the format.';
        return;
      }

      let htmlOutput = '';
      let textOutput = '';

      // 🟧 UserCharts
      const usercharts = xmlDoc.getElementsByTagName('userchart');
      if (usercharts.length > 0) {
        for (let chart of usercharts) {
          const chartName = chart.getAttribute('name') || '(No name)';
          htmlOutput += `<span class="userchart">UserChart name: ${chartName}</span>\n`;
          textOutput += `UserChart name: ${chartName}\n`;

          // Process elements inside each userchart
          processElements(chart, htmlOutput, textOutput);
        }
      } else {
        // If no userchart, just parse the whole doc normally
        processElements(xmlDoc);
      }

      function processElements(root, htmlOut, textOut) {
        let html = '';
        let txt = '';

        // 🟡 Areas
        const areas = root.getElementsByTagName('area');
        for (let area of areas) {
          const name = area.getAttribute('name') || '(No name)';
          html += `<span class="bullet area">•</span>AREA: ${name}\n`;
          txt += `AREA: ${name}\n`;
          for (let v of area.getElementsByTagName('vertex')) {
            const lat = parseFloat(v.getAttribute('latitude'));
            const lon = parseFloat(v.getAttribute('longitude'));
            const coord = `${toDM(lat, true)}, ${toDM(lon, false)}`;
            html += `  ${coord}\n`;
            txt += `  ${coord}\n`;
          }
          html += '\n';
          txt += '\n';
        }

        // 🔵 Lines
        const lines = root.getElementsByTagName('line');
        for (let line of lines) {
          const name = line.getAttribute('name') || '(No name)';
          const attr = line.querySelector('attribute');
          const type = attr ? attr.getAttribute('lineType') : '(no type)';
          html += `<span class="bullet line">•</span>LINE: ${name}\n  Type: ${type}\n`;
          txt += `LINE: ${name}\n  Type: ${type}\n`;
          for (let v of line.getElementsByTagName('vertex')) {
            const lat = parseFloat(v.getAttribute('latitude'));
            const lon = parseFloat(v.getAttribute('longitude'));
            const coord = `${toDM(lat, true)}, ${toDM(lon, false)}`;
            html += `  ${coord}\n`;
            txt += `  ${coord}\n`;
          }
          html += '\n';
          txt += '\n';
        }

        // 🟢 Circles
        const circles = root.getElementsByTagName('circle');
        for (let circle of circles) {
          const name = circle.getAttribute('name') || '(No name)';
          const attr = circle.querySelector('attribute');
          let range = attr ? attr.getAttribute('range') : '(no range)';
          if (!isNaN(range)) range = parseFloat(range).toFixed(2);
          html += `<span class="bullet circle">•</span>CIRCLE: ${name}\n  Range: ${range} NM\n`;
          txt += `CIRCLE: ${name}\n  Range: ${range} NM\n`;
          const v = circle.querySelector('vertex');
          if (v) {
            const lat = parseFloat(v.getAttribute('latitude'));
            const lon = parseFloat(v.getAttribute('longitude'));
            const coord = `${toDM(lat, true)}, ${toDM(lon, false)}`;
            html += `  Center: ${coord}\n`;
            txt += `  Center: ${coord}\n`;
          }
          html += '\n';
          txt += '\n';
        }

        // 🟤 Coast Lines
        const coasts = root.getElementsByTagName('coastline');
        for (let coast of coasts) {
          const name = coast.getAttribute('name') || '(No name)';
          html += `<span class="bullet coast">•</span>COAST LINE: ${name}\n`;
          txt += `COAST LINE: ${name}\n`;
          for (let v of coast.getElementsByTagName('vertex')) {
            const lat = parseFloat(v.getAttribute('latitude'));
            const lon = parseFloat(v.getAttribute('longitude'));
            const coord = `${toDM(lat, true)}, ${toDM(lon, false)}`;
            html += `  ${coord}\n`;
            txt += `  ${coord}\n`;
          }
          html += '\n';
          txt += '\n';
        }

        // 🟣 Labels
        const labels = root.getElementsByTagName('label');
        for (let label of labels) {
          const name = label.getAttribute('name') || '(No name)';
          const text = label.textContent.trim() || '(no text)';
          const v = label.querySelector('vertex');
          html += `<span class="bullet label">•</span>LABEL: ${name}\n  Text: ${text}\n`;
          txt += `LABEL: ${name}\n  Text: ${text}\n`;
          if (v) {
            const lat = parseFloat(v.getAttribute('latitude'));
            const lon = parseFloat(v.getAttribute('longitude'));
            const coord = `${toDM(lat, true)}, ${toDM(lon, false)}`;
            html += `  Position: ${coord}\n`;
            txt += `  Position: ${coord}\n`;
          }
          html += '\n';
          txt += '\n';
        }

        htmlOutput += html;
        textOutput += txt;
      }

      parsedOutput = textOutput;
      document.getElementById('result').innerHTML = htmlOutput || 'No recognized elements found.';
    } catch (error) {
      document.getElementById('result').textContent = `Error: ${error.message}`;
    }
  }

  function downloadTextFile() {
    if (!parsedOutput) {
      alert("Nothing to download. Please parse XML first.");
      return;
    }
    const blob = new Blob([parsedOutput], { type: 'text/plain' });
    const link = document.createElement('a');
    link.href = URL.createObjectURL(blob);
    link.download = 'parsed_coordinates.txt';
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
  }
</script>

</body>
</html>
